"use strict";define(["angular","require","jquery","config","bootstrap","route"],function(e,t){var a=t("jquery"),l=t("config").config,r=t("config").adminPages,n=function(){a(".load-cover").css({opacity:0}),setTimeout(function(){a(".load-cover").remove()},2e3)};a(".sidebar").on("click",".nav-model .nav-model-header",function(e){a(e.target).parent(".nav-model").toggleClass("active")});var o=e.module("admin",["ui.router"]);o.controller("userManageCtrl",function(e,t){}),o.controller("userRoleManageCtrl",function(e,t){}),o.controller("navManageCtrl",function(e,t){}),o.controller("adManageCtrl",function(e,t){}),o.controller("dbManageCtrl",function(e,t){}),o.controller("rolePermissionManageCtrl",function(e,t){}),o.controller("roleManageCtrl",function(e,t){}),o.controller("columnManageCtrl",function(e,t){}),o.controller("publishCtrl",function(e,t){}),o.controller("contentManageCtrl",function(e,t){}),o.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("settings",{url:"/settings",resolve:{},templateUrl:"tpls/settings.html"}).state("index",{url:"/",resolve:{},templateUrl:"tpls/hello.html"}).state("userManage",{url:"/userManage",resolve:{},templateUrl:"tpls/userManage.html",controller:"userManageCtrl"}).state("userRoleManage",{url:"/userRoleManage",resolve:{},templateUrl:"tpls/userRoleManage.html",controller:"userRoleManageCtrl"}).state("navManage",{url:"/navManage",resolve:{},templateUrl:"tpls/navManage.html",controller:"navManageCtrl"}).state("adManage",{url:"/adManage",resolve:{},templateUrl:"tpls/adManage.html",controller:"adManageCtrl"}).state("dbManage",{url:"/dbManage",resolve:{},templateUrl:"tpls/dbManage.html",controller:"dbManageCtrl"}).state("roleManage",{url:"/roleManage",resolve:{},templateUrl:"tpls/roleManage.html",controller:"roleManageCtrl"}).state("rolePermissionManage",{url:"/rolePermissionManage",resolve:{},templateUrl:"tpls/rolePermissionManage.html",controller:"rolePermissionManageCtrl"}).state("columnManage",{url:"/columnManage",resolve:{},templateUrl:"tpls/columnManage.html",controller:"columnManageCtrl"}).state("publish",{url:"/publish",resolve:{},templateUrl:"tpls/publish.html",controller:"publishCtrl"}).state("contentManage",{url:"/contentManage",resolve:{},templateUrl:"tpls/contentManage.html",controller:"contentManageCtrl"}),t.otherwise("/")}]),o.controller("adminCtrl",function(e,t){e.config=l,e.title="管理主页-"+l.projectName,e.userName="",e.password="",e.adminPages=r,e.login=function(){t({url:l.api+"/login",method:"POST",withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"*/*"},transformRequest:a.param,data:{userName:e.userName,passWord:e.password}}).then(function(e){var t=e.data;if("ok"===t.status)window.location.reload();else{var a;a="PassWord is not right!"==t.msg?"密码不正确！":"用户不存在！",alert(a)}})},e.navList=[{title:"4",nav:["401","402","403"]},{title:"1",nav:["101","102"]},{title:"3",nav:["301","302"]},{title:"2",nav:["201","202","203"]}],t({url:l.api+"/login/status",method:"GET",withCredentials:!0}).then(function(t){var l=t.data;l.isLogin?(e.userName=l.userName,n()):a("#loginModal").modal({backdrop:"static",keyboard:!1})})}),e.bootstrap(document,["admin"])});